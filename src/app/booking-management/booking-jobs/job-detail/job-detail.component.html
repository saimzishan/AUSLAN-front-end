<header id="header-mobile">
  <button [routerLink]="['/booking-management']" class="icon-back"></button>
  <h1>JOB #{{selectedBookingModel.id | PrettyID}}</h1>
</header>


<section id="page-common">
  <section id="static-flow">
    <section id="submenu">
      <nav>
        <a href="javascript:void(0);" class="active">Booking info</a>
      </nav>
      <div>
        <button [disabled]="disableAccept" (click)="showDialogBox(true)" class="button pink">Decline</button>
        <div class="sep"></div>
        <button [disabled]="disableReject" (click)="showDialogBox(false)" class="button inverse">Accept</button>
      </div>
    </section>
    <section id="steps">
      <nav>
        <a href="javascript:void(0);" [ngClass]="{'active' : isActiveState('Requested'),
                'passed' : isPassedState('Requested')}">Requested</a>
        <a href="javascript:void(0);" [ngClass]="{'active' : isActiveState('In_progress'),
                'passed' : isPassedState('In_progress')}">In Progress</a>
        <a href="javascript:void(0);" [ngClass]="{'active' : isActiveState('Allocated'),
                'passed' : isPassedState('Allocated')}">Allocated</a>
        <a href="javascript:void(0);" [ngClass]="{'active' : isActiveState('Completed'),
                'passed' : isPassedState('Completed')}">Completed</a>
        <a href="javascript:void(0);" [ngClass]="{'active' :  isActiveState('Unable_to_service') || isActiveState('Cancelled')}">
                    {{isActiveState('Cancelled') ? 'Cancelled' :
                    isActiveState('Unable_to_service') ? 'Unable To Serve' : 'Finished' }}
                </a>
      </nav>
    </section>
  </section>
  <div class="job-status">
    <span class="status-accepted">
                {{stateStr}} <i class="icon-requested"></i>
            </span>
  </div>


  <section id="job-booking">
    <main>
      <h2>Job Details</h2>
      <table id="job-details-responsive" class="custom-small-table">
        <thead>
          <tr>
            <th width="5%">Job</th>
            <th width="7%">Time</th>
            <th width="7%">Date</th>
            <th width="7%">Org</th>
            <th width="6%">Client</th>
            <th width="11%">Venue</th>
            <th width="7%">Suburb</th>
            <th width="5%">Type</th>
            <th width="7%">#People</th>
            <th width="12%">Special Instructions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td data-title="JOB NUMBER">{{selectedBookingModel.id | PrettyID}}</td>

            <td data-title="TIME"><span>{{selectedBookingModel.venue.start_time_iso | date:'shortTime'}} - {{selectedBookingModel.venue.end_time_iso | date:'shortTime'}}</span></td>
            <td data-title="DATE"><span>{{selectedBookingModel.venue.start_time_iso | date:'EEE d MMM yy'}}
													</span></td>
            <td data-title="Language">AUSLAN</td>
            <td data-title="Client">{{selectedBookingModel.contact.first_name}}</td>
            <td data-title="VENUE">{{selectedBookingModel.venue.title}}</td>
            <td data-title="SUBURB">
              <a target="_blank" href="{{'https://www.google.com.au/maps/place/' +selectedBookingModel.venue.suburb}}">{{selectedBookingModel.venue.suburb}}</a></td>
            <td data-title="TYPE OF JOB">{{selectedBookingModel.nature_of_appointment}}</td>
            <td data-title="People">{{selectedBookingModel.venue.expected_attendance}}</td>
            <td data-title="SPECIAL INSTRUCTIONS" class="new-line">{{selectedBookingModel.notes}}</td>
            <!-- td align="center">
                        <ul class="dropdown menu custom" data-dropdown-menu>
                            <li>
                                <a href="#" class="icon-attach"></a>
                                <ul class="menu">
                                    <li><a href="#"><i class="icon-attach"></i> Attachments.xls</a></li>
                                </ul>
                            </li>
                        </ul>
                    </td>
                    <td>61 days (27 Jan)</td>
                    <td><span class="underline">02-06 TS<br>7:15 A</span></td -->
          </tr>
        </tbody>
      </table>

      <section class="columns small-padding">
        <ng-container *ngIf="anyInterpreterAccepted()">

        <div class="row with-border" *ngFor="let interpreter of selectedBookingModel.interpreters; let i=index">
          <ng-container *ngIf="interpreter.state === 'accept'">
            <div> {{i + 1}} INTERPRETER
            </div>
            <span class="with-avatar">
                            <img src="assets/img/dummy/oval.png" alt="">
                    {{interpreter.first_name}} {{interpreter.last_name}}
                    </span>
          </ng-container>
        </div>
      </ng-container>

        <div *ngIf="(selectedBookingModel.notes) && selectedBookingModel.notes.length > 0;" class="row">
          <span>DESCRIPTION</span>
        </div>
        <p>{{selectedBookingModel.notes}}</p>

        <div class="row">
          <span>DO YOU WANT TO DO THIS JOB?</span>
        </div>
        <div class="manage-job-buttons">
          <button [disabled]="disableAccept" class="button button-accept" (click)="showDialogBox(false)"><i class="icon-check-mobile"></i></button>
          <button class="button button-help"><i class="icon-help"></i></button>
          <button [disabled]="disableReject" class="button button-decline" (click)="showDialogBox(true)"><i class="icon-decline"></i></button>
        </div>
      </section>

<ng-container *ngIf="anyInterpreterAccepted()">
      <div class="manage-interpreters-wrapper">
        <section class="manage-interpreters">
          <section>
            <div *ngFor="let interpreter of selectedBookingModel.interpreters; let i=index">
              <ng-container *ngIf="interpreter.state === 'accept'">

                <b>Interpreter {{i + 1}}:</b> <span>{{interpreter.first_name}} {{interpreter.last_name}}</span>
              </ng-container>

            </div>
          </section>
        </section>
      </div>
    </ng-container>

      <h2 class="hidden-mobile">History</h2>
      <table id="changes-history" class="custom-small-table">
        <thead>
          <th width="20%" class="sort asc">Date and Time</th>
          <th width="30%" class="sort desc">Action</th>
          <th>Changes</th>
        </thead>
        <tbody>

        </tbody>
      </table>
    </main>
  </section>
</section>
